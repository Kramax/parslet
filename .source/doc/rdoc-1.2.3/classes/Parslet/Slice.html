<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Parslet::Slice</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Parslet::Slice 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/parslet/slice_rb.html">lib/parslet/slice.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
A slice is a small part from the parse input. A slice mainly behaves like
any other string, except that it remembers where it came from (offset in
original input).
</p>
<p>
Some slices also know what parent slice they are a small part of. This
allows the slice to be concatenated to other slices from the same buffer by
reslicing it against that original buffer.
</p>
<p>
Why the complexity? Slices allow retaining offset information. This will
allow to assign line and column to each small bit of output from the
parslet parser. Also, while we keep that information, we might as well try
to do something useful with it. Reslicing the same buffers should in theory
keep buffer copies and allocations down.
</p>
<h2>Extracting line and column</h2>
<p>
Using the <a href="Slice.html#M000131">line_and_column</a> method, you can
extract the line and column in the original input where this slice starts.
</p>
<p>
Example:
</p>
<pre>
  slice.line_and_column # =&gt; [1, 13]
  slice.offset          # =&gt; 12
</pre>
<h2>Likeness to strings</h2>
<p>
<a href="Slice.html">Parslet::Slice</a> behaves in many ways like a Ruby
String. This likeness however is not complete - many of the myriad of
operations String supports are not yet in <a href="Slice.html">Slice</a>.
You can always extract the internal string instance by calling <a
href="Slice.html#M000133">to_s</a>.
</p>
<p>
These omissions are somewhat intentional. Rather than maintaining a full
delegation, we opt for a partial emulation that gets the job done.
</p>
<p>
Note also that there are some things that work with strings that will never
work when using slices. For instance, you cannot concatenate slices that
aren&#8217;t from the same source or that don&#8217;t join up:
</p>
<p>
Example:
</p>
<pre>
  big_slice = 'abcdef'
  a = big_slice.slice(0, 2)   # =&gt; &quot;ab&quot;@0
  b = big_slice.slice(4, 2)   # =&gt; &quot;ef&quot;@4

  a + b # raises Parslet::InvalidSliceOperation
</pre>
<p>
This avoids creating slices with impossible offsets or that are
discontinous.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000130">+</a>,</li>
                
                <li><a href="#M000127">==</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000139">inspect</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000131">line_and_column</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000128">match</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000124">new</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000129">size</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000138">to_f</a>,</li>
                
                <li><a href="#M000137">to_i</a>,</li>
                
                <li><a href="#M000136">to_int</a>,</li>
                
                <li><a href="#M000133">to_s</a>,</li>
                
                <li><a href="#M000134">to_slice</a>,</li>
                
                <li><a href="#M000132">to_str</a>,</li>
                
                <li><a href="#M000135">to_sym</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>str</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>offset</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>source</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000124">
                    
                    <a name="M000124"></a><b>new</b>(string, offset, source=nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000124_source')" id="l_M000124_source">show</a>
                        
                        | <a href="http://github.com/kschiess/parslet/blob/3b4f00011a595659577dda34ad33ac157fc78680/lib/parslet/slice.rb#L53" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000124_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/parslet/slice.rb, line 53</span>
53:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">source</span>=<span class="ruby-keyword kw">nil</span>)
54:     <span class="ruby-ivar">@str</span>, <span class="ruby-ivar">@offset</span> = <span class="ruby-identifier">string</span>, <span class="ruby-identifier">offset</span>
55:     <span class="ruby-ivar">@source</span> = <span class="ruby-identifier">source</span>
56:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000130">
                    
                    <a name="M000130"></a><b>+</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Concatenate two slices; it is assumed that the second slice begins where
the first one ends. The offset of the resulting slice is the same as the
one of this slice.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000130_source')" id="l_M000130_source">show</a>
                        
                        | <a href="http://github.com/kschiess/parslet/blob/3b4f00011a595659577dda34ad33ac157fc78680/lib/parslet/slice.rb#L80" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000130_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/parslet/slice.rb, line 80</span>
80:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">+</span>(<span class="ruby-identifier">other</span>)
81:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">str</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">source</span>)
82:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000127">
                    
                    <a name="M000127"></a><b>==</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Compares slices to other slices or strings.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000127_source')" id="l_M000127_source">show</a>
                        
                        | <a href="http://github.com/kschiess/parslet/blob/3b4f00011a595659577dda34ad33ac157fc78680/lib/parslet/slice.rb#L60" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000127_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/parslet/slice.rb, line 60</span>
60:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>
61:     <span class="ruby-identifier">str</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>
62:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000139">
                    
                    <a name="M000139"></a><b>inspect</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Prints the slice as <tt>&quot;string&quot;@offset</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000139_source')" id="l_M000139_source">show</a>
                        
                        | <a href="http://github.com/kschiess/parslet/blob/3b4f00011a595659577dda34ad33ac157fc78680/lib/parslet/slice.rb#L119" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000139_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/parslet/slice.rb, line 119</span>
119:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
120:     <span class="ruby-identifier">str</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;@#{offset}&quot;</span>
121:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000131">
                    
                    <a name="M000131"></a><b>line_and_column</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a <line, column> tuple referring to the original input.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000131_source')" id="l_M000131_source">show</a>
                        
                        | <a href="http://github.com/kschiess/parslet/blob/3b4f00011a595659577dda34ad33ac157fc78680/lib/parslet/slice.rb#L86" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000131_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/parslet/slice.rb, line 86</span>
86:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">line_and_column</span>
87:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;No source was given, cannot infer line and column.&quot;</span> \
88:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">source</span>
89: 
90:     <span class="ruby-identifier">source</span>.<span class="ruby-identifier">line_and_column</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">offset</span>)
91:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000128">
                    
                    <a name="M000128"></a><b>match</b>(regexp)
                    
                </div>
                
                <div class="description">
                  <p>
Match regular expressions.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000128_source')" id="l_M000128_source">show</a>
                        
                        | <a href="http://github.com/kschiess/parslet/blob/3b4f00011a595659577dda34ad33ac157fc78680/lib/parslet/slice.rb#L66" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000128_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/parslet/slice.rb, line 66</span>
66:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">match</span>(<span class="ruby-identifier">regexp</span>)
67:     <span class="ruby-identifier">str</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">regexp</span>)
68:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000129">
                    
                    <a name="M000129"></a><b>size</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the slices size in characters.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000129_source')" id="l_M000129_source">show</a>
                        
                        | <a href="http://github.com/kschiess/parslet/blob/3b4f00011a595659577dda34ad33ac157fc78680/lib/parslet/slice.rb#L72" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000129_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/parslet/slice.rb, line 72</span>
72:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">size</span>
73:     <span class="ruby-identifier">str</span>.<span class="ruby-identifier">size</span>
74:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000138">
                    
                    <a name="M000138"></a><b>to_f</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000138_source')" id="l_M000138_source">show</a>
                        
                        | <a href="http://github.com/kschiess/parslet/blob/3b4f00011a595659577dda34ad33ac157fc78680/lib/parslet/slice.rb#L112" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000138_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/parslet/slice.rb, line 112</span>
112:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_f</span>
113:     <span class="ruby-identifier">str</span>.<span class="ruby-identifier">to_f</span>
114:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000137">
                    
                    <a name="M000137"></a><b>to_i</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000137_source')" id="l_M000137_source">show</a>
                        
                        | <a href="http://github.com/kschiess/parslet/blob/3b4f00011a595659577dda34ad33ac157fc78680/lib/parslet/slice.rb#L109" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000137_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/parslet/slice.rb, line 109</span>
109:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_i</span>
110:     <span class="ruby-identifier">str</span>.<span class="ruby-identifier">to_i</span>
111:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000136">
                    
                    <a name="M000136"></a><b>to_int</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000136_source')" id="l_M000136_source">show</a>
                        
                        | <a href="http://github.com/kschiess/parslet/blob/3b4f00011a595659577dda34ad33ac157fc78680/lib/parslet/slice.rb#L106" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000136_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/parslet/slice.rb, line 106</span>
106:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_int</span>
107:     <span class="ruby-constant">Integer</span>(<span class="ruby-identifier">str</span>)
108:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000133">
                    
                    <a name="M000133"></a><b>to_s</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="Slice.html#M000132">to_str</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000134">
                    
                    <a name="M000134"></a><b>to_slice</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000134_source')" id="l_M000134_source">show</a>
                        
                        | <a href="http://github.com/kschiess/parslet/blob/3b4f00011a595659577dda34ad33ac157fc78680/lib/parslet/slice.rb#L100" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000134_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/parslet/slice.rb, line 100</span>
100:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_slice</span>
101:     <span class="ruby-keyword kw">self</span>
102:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000132">
                    
                    <a name="M000132"></a><b>to_str</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Conversion operators
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="Slice.html#M000133">to_s</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000132_source')" id="l_M000132_source">show</a>
                        
                        | <a href="http://github.com/kschiess/parslet/blob/3b4f00011a595659577dda34ad33ac157fc78680/lib/parslet/slice.rb#L95" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000132_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/parslet/slice.rb, line 95</span>
95:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_str</span>
96:     <span class="ruby-identifier">str</span>
97:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000135">
                    
                    <a name="M000135"></a><b>to_sym</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000135_source')" id="l_M000135_source">show</a>
                        
                        | <a href="http://github.com/kschiess/parslet/blob/3b4f00011a595659577dda34ad33ac157fc78680/lib/parslet/slice.rb#L103" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000135_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/parslet/slice.rb, line 103</span>
103:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_sym</span>
104:     <span class="ruby-identifier">str</span>.<span class="ruby-identifier">to_sym</span>
105:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    